(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{244:function(t,e,a){var s=a(265);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(166).default)("47fe50f4",s,!0,{})},263:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expirationYear=void 0;function s(t,e,a){return{isValid:t,isPotentiallyValid:e,isCurrentYear:a||!1}}e.expirationYear=function(t,e){var a;if(void 0===e&&(e=19),"string"!=typeof t)return s(!1,!1);if(""===t.replace(/\s/g,""))return s(!1,!0);if(!/^\d*$/.test(t))return s(!1,!1);var i=t.length;if(i<2)return s(!1,!0);var n=(new Date).getFullYear();if(3===i)return s(!1,t.slice(0,2)===String(n).slice(0,2));if(i>4)return s(!1,!1);var o=parseInt(t,10),r=Number(String(n).substr(2,2)),c=!1;return 2===i?(a=r===o,c=o>=r&&o<=r+e):4===i&&(a=n===o,c=o>=n&&o<=n+e),s(c,c,a)}},264:function(t,e,a){"use strict";a(244)},265:function(t,e,a){(e=a(165)(!1)).push([t.i,".summary__item{display:flex;align-items:flex-start;overflow-x:hidden;margin-bottom:.5rem}.summary__item a{color:inherit}.summary__item picture{flex:0 0 70px;width:70px;height:auto;margin-right:.5rem}.summary__item picture img{border-radius:var(--border-radius)}.summary__item small{line-height:1.3;display:inline-block}.summary__amount{margin:1rem 0 1.5rem;padding:.75rem 0;border-top:1px dotted var(--gray)}.summary__amount:last-child{margin-bottom:0;padding-bottom:0}.summary__amount__row{display:flex;justify-content:space-between;align-items:center;margin-top:.25rem}.summary__amount__row>span{font-weight:300}.summary__amount__row>span small{display:block;line-height:1.15;color:var(--gray)}.summary__amount__row--total{margin-top:.5rem;font-size:1.25rem}.summary__amount__row--total>div{font-weight:700}.summary__amount__row--total strong{color:var(--secondary)}.summary .prices{text-align:right}",""]),t.exports=e},271:function(t,e,a){"use strict";var s=a(28),i=a(39),n=a(90),o=a(22),r=a(40),c=a(79),l=a(88),u=a(185),d=a(187),p=a(188),m={name:"EcSummary",components:{ALink:u.a,APicture:d.a,APrices:p.a},props:{amount:{type:Object,required:!0},items:Array,buyer:Object,shippingAddress:Object,canShowPriceOptions:Boolean},computed:{i19buyer:()=>Object(i.a)(s.w),i19contactPhone:()=>Object(i.a)(s.P),i19discount:()=>Object(i.a)(s.Z),i19docNumber:()=>Object(i.a)(s.db),i19freebie:()=>Object(i.a)(s.rb),i19freight:()=>Object(i.a)(s.sb),i19myAccount:()=>Object(i.a)(s.Wb),i19subtotal:()=>Object(i.a)(s.ud),i19summary:()=>Object(i.a)(s.vd),i19total:()=>Object(i.a)(s.yd),buyerName(){if(!this.buyer)return"";const{name:t}=this.buyer;return"".concat(t.given_name," ").concat(t.middle_name||""," ").concat(t.family_name)},buyerPhone(){return Object(n.a)(this.buyer)}},methods:{getName:o.a,getPrice:r.a,formatMoney:c.a,getImg:t=>Object(l.a)(t,null,"small")}},h=(a(264),a(53)),_=Object(h.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"summary"},[a("h5",{staticClass:"summary__title"},[t._v(" "+t._s(t.i19summary)+" ")]),t._t("list",[t.items?a("div",{staticClass:"summary__list"},t._l(t.items,(function(e){return a("div",{key:e._id,staticClass:"summary__item"},[t.getImg(e)?a("a-picture",{attrs:{src:t.getImg(e).url,alt:t.getImg(e).alt||e.name}}):t._e(),a("div",[a("span",{staticClass:"badge badge-secondary"},[t._v(" "+t._s(e.quantity)+" ")]),Array.isArray(e.flags)&&e.flags.includes("freebie")?[a("s",[t._v(t._s(t.formatMoney(t.getPrice(e))))]),a("small",{staticClass:"text-muted"},[a("i",{staticClass:"fas fa-gift ml-2 mr-1"}),t._v(" "+t._s(t.i19freebie)+" ")])]:[t._v(" "+t._s(t.formatMoney(t.getPrice(e)))+" ")],a("br"),e.slug?a("a-link",{attrs:{href:"/"+e.slug,target:"_blank"}},[a("small",[t._v(t._s(t.getName(e)))])]):a("small",[t._v(" "+t._s(t.getName(e))+" ")])],2)],1)})),0):t._e()]),t._t("more-offers"),t._t("amount",[a("div",{staticClass:"summary__amount"},[a("div",{staticClass:"summary__amount__row"},[a("span",[t._v(t._s(t.i19subtotal))]),a("div",[t._v(t._s(t.formatMoney(t.amount.subtotal)))])]),a("div",{staticClass:"summary__amount__row"},[a("span",[t._v(" "+t._s(t.i19freight)+" "),t.shippingAddress?a("small",[t._v(" "+t._s(t.shippingAddress.street)+" "),t.shippingAddress.number?[t._v(" "+t._s(t.shippingAddress.number)+" ")]:t._e(),t._v(" "+t._s(t.shippingAddress.city)+" "+t._s(t.shippingAddress.province_code)+" ")],2):t._e()]),a("div",[t._v(t._s(t.formatMoney(t.amount.freight)))])]),t.amount.discount?a("div",{staticClass:"summary__amount__row"},[a("span",[t._v(t._s(t.i19discount))]),a("div",[t._v(t._s(t.formatMoney(t.amount.discount)))])]):t._e(),a("div",{staticClass:"summary__amount__row summary__amount__row--total"},[a("span",[t._v(t._s(t.i19total))]),t.canShowPriceOptions?a("a-prices",{attrs:{product:{price:t.amount.total},"discount-option":{value:t.amount.discount},"is-literal":!0}}):a("div",[t._v(" "+t._s(t.formatMoney(t.amount.total))+" ")])],1)])]),t._t("default"),t._t("buyer",[t.buyer?a("div",{staticClass:"summary__buyer"},[a("h5",[t._v(t._s(t.i19buyer))]),a("p",[t._v(" "+t._s(t.buyerName)+" "),a("br"),a("small",[t._v(t._s(t.i19docNumber)+":")]),t._v(" "+t._s(t.buyer.doc_number)+" "),a("br"),a("small",[t._v(t._s(t.i19contactPhone)+":")]),t._v(" "+t._s(t.buyerPhone)+" ")]),a("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("click:account")}}},[a("i",{staticClass:"fas fa-pencil-alt mr-1"}),t._v(" "+t._s(t.i19myAccount)+" ")])]):t._e()])],2)}),[],!1,null,null,null);e.a=_.exports},285:function(module,__webpack_exports__,__webpack_require__){"use strict";const startedScriptsRefs=[];__webpack_exports__.a=(jsClient,skipOnloadExpression)=>{const src=jsClient.script_uri;let scriptRef=startedScriptsRefs.find((t=>t.src===src)),$script;return scriptRef?$script=scriptRef.$script:($script=document.createElement("script"),$script.async=!0,$script.defer=!0,scriptRef={src:src,$script:$script,resolves:[]},startedScriptsRefs.push(scriptRef),setTimeout((()=>{$script.setAttribute("src",src),document.head.appendChild($script)}),150*Math.random()+50)),new Promise((resolve=>{$script.onload=()=>{scriptRef.isLoaded=!0;let expression=jsClient.onload_expression;const runExpression=checkoutData=>{if(window._checkout=checkoutData,Object.assign(window.storefrontApp,window._checkout),expression){try{eval(expression)}catch(t){console.error(t,expression)}jsClient.container_html||(expression=null)}};skipOnloadExpression?scriptRef.resolves.forEach((t=>t(runExpression))):(runExpression(),scriptRef.resolves.forEach((t=>t())))},scriptRef.resolves.push(resolve),scriptRef.isLoaded&&$script.onload()}))}},286:function(t,e,a){"use strict";function s(t,e,a){return{isValid:t,isPotentiallyValid:e,isValidForThisYear:a||!1}}Object.defineProperty(e,"__esModule",{value:!0}),e.expirationMonth=void 0,e.expirationMonth=function(t){var e=(new Date).getMonth()+1;if("string"!=typeof t)return s(!1,!1);if(""===t.replace(/\s/g,"")||"0"===t)return s(!1,!0);if(!/^\d*$/.test(t))return s(!1,!1);var a=parseInt(t,10);if(isNaN(Number(t)))return s(!1,!1);var i=a>0&&a<13;return s(i,i,i&&a>=e)}},287:function(t,e,a){var s=a(344);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(166).default)("735f16e4",s,!0,{})},288:function(t,e,a){var s=a(346);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(166).default)("37762110",s,!0,{})},293:function(t,e,a){var s=a(355);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(166).default)("3ef5be20",s,!0,{})},334:function(t,e,a){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,a,s){void 0===s&&(s=a),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[a]}})}:function(t,e,a,s){void 0===s&&(s=a),t[s]=e[a]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=(this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)"default"!==a&&Object.hasOwnProperty.call(t,a)&&s(e,t,a);return i(e,t),e})(a(191)),o=a(335),r=a(336),c=a(338),l=a(286),u=a(263),d=a(341),p=a(342),m={creditCardType:n,cardholderName:o.cardholderName,number:r.cardNumber,expirationDate:c.expirationDate,expirationMonth:l.expirationMonth,expirationYear:u.expirationYear,cvv:d.cvv,postalCode:p.postalCode};t.exports=m},335:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cardholderName=void 0;var s=/^[\d\s-]*$/;function i(t,e){return{isValid:t,isPotentiallyValid:e}}e.cardholderName=function(t){return"string"!=typeof t?i(!1,!1):0===t.length?i(!1,!0):t.length>255?i(!1,!1):s.test(t)?i(!1,!0):i(!0,!0)}},336:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cardNumber=void 0;var s=a(337),i=a(191);function n(t,e,a){return{card:t,isPotentiallyValid:e,isValid:a}}e.cardNumber=function(t,e){var a,o;if(void 0===e&&(e={}),"string"!=typeof t&&"number"!=typeof t)return n(null,!1,!1);var r=String(t).replace(/-|\s/g,"");if(!/^\d*$/.test(r))return n(null,!1,!1);var c=i(r);if(0===c.length)return n(null,!1,!1);if(1!==c.length)return n(null,!0,!1);var l=c[0];if(e.maxLength&&r.length>e.maxLength)return n(l,!1,!1);a=l.type===i.types.UNIONPAY&&!0!==e.luhnValidateUnionPay||s(r),o=Math.max.apply(null,l.lengths),e.maxLength&&(o=Math.min(e.maxLength,o));for(var u=0;u<l.lengths.length;u++)if(l.lengths[u]===r.length)return n(l,r.length<o||a,a);return n(l,r.length<o,!1)}},337:function(t,e,a){"use strict";t.exports=function(t){for(var e,a=0,s=!1,i=t.length-1;i>=0;)e=parseInt(t.charAt(i),10),s&&(e*=2)>9&&(e=e%10+1),s=!s,a+=e,i--;return a%10==0}},338:function(t,e,a){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,a=1,s=arguments.length;a<s;a++)for(var i in e=arguments[a])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.expirationDate=void 0;var i=a(339),n=a(286),o=a(263);function r(t,e,a,s){return{isValid:t,isPotentiallyValid:e,month:a,year:s}}e.expirationDate=function(t,e){var a;if("string"==typeof t)t=t.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2"),a=i.parseDate(String(t));else{if(null===t||"object"!=typeof t)return r(!1,!1,null,null);var c=s({},t);a={month:String(c.month),year:String(c.year)}}var l=n.expirationMonth(a.month),u=o.expirationYear(a.year,e);if(l.isValid){if(u.isCurrentYear){var d=l.isValidForThisYear;return r(d,d,a.month,a.year)}if(u.isValid)return r(!0,!0,a.month,a.year)}return l.isPotentiallyValid&&u.isPotentiallyValid?r(!1,!0,null,null):r(!1,!1,null,null)}},339:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDate=void 0;var s=a(263),i=a(340);e.parseDate=function(t){var e;if(/^\d{4}-\d{1,2}$/.test(t)?e=t.split("-").reverse():/\//.test(t)?e=t.split(/\s*\/\s*/g):/\s/.test(t)&&(e=t.split(/ +/g)),i.isArray(e))return{month:e[0]||"",year:e.slice(1).join()};var a,n,o,r=(a=t,0===(o=Number(a[0]))?2:o>1||1===o&&Number(a[1])>2?1:1===o?(n=a.substr(1),s.expirationYear(n).isPotentiallyValid?1:2):5===a.length?1:a.length>5?2:1),c=t.substr(0,r);return{month:c,year:t.substr(c.length)}}},340:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},341:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cvv=void 0;function s(t,e){return{isValid:t,isPotentiallyValid:e}}e.cvv=function(t,e){return void 0===e&&(e=3),e=e instanceof Array?e:[e],"string"!=typeof t?s(!1,!1):/^\d*$/.test(t)?function(t,e){for(var a=0;a<t.length;a++)if(e===t[a])return!0;return!1}(e,t.length)?s(!0,!0):t.length<Math.min.apply(null,e)?s(!1,!0):t.length>function(t){for(var e=3,a=0;a<t.length;a++)e=t[a]>e?t[a]:e;return e}(e)?s(!1,!1):s(!0,!0):s(!1,!1)}},342:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postalCode=void 0;function s(t,e){return{isValid:t,isPotentiallyValid:e}}e.postalCode=function(t,e){void 0===e&&(e={});var a=e.minLength||3;return"string"!=typeof t?s(!1,!1):t.length<a?s(!1,!0):s(!0,!0)}},343:function(t,e,a){"use strict";a(287)},344:function(t,e,a){(e=a(165)(!1)).push([t.i,".credit-card__bin .pay-icon{margin:-2px 0}.credit-card__name input{text-transform:uppercase}",""]),t.exports=e},345:function(t,e,a){"use strict";a(288)},346:function(t,e,a){(e=a(165)(!1)).push([t.i,".payment__loading{width:100%;padding-top:4rem;text-align:center}.payment__loading>div{width:6rem;height:6rem}.payment__head{display:flex;justify-content:space-between}.payment__icon{width:2em;text-align:center;margin-left:.25rem}.payment__text{display:block;margin-top:.25rem;font-size:.9rem;color:var(--gray)}.payment__badges{display:inline-block;text-transform:lowercase}.payment__badges .badge{margin-right:.25rem}.payment__discount-value{text-transform:uppercase}.payment__stamp{max-width:100%;margin:.75rem auto 0}.payment__back,.payment__intermediator{color:var(--gray)}.payment__back{font-size:.85rem;padding:.15rem}.payment__back:hover{color:var(--black)}.payment__back:focus{outline:none}",""]),t.exports=e},354:function(t,e,a){"use strict";a(293)},355:function(t,e,a){(e=a(165)(!1)).push([t.i,'.checkout__account{max-width:600px;margin:0 auto}.checkout__account>.lead{text-align:center}.checkout__app{min-height:300px;max-width:90rem;margin:0 auto 1rem}.checkout__steps{display:flex;margin-bottom:.5rem}.checkout__step{padding:.35rem;flex-grow:1;color:var(--primary-light);text-align:center;font-size:.85rem;position:relative;text-transform:uppercase}.checkout__step>small{border-radius:50%;background:var(--light);width:1rem;display:inline-block;border-right:1px solid var(--primary)}.checkout__step:not(:last-child):before{position:absolute;right:0;content:"/";color:var(--gray);font-weight:700}.checkout__step--current{font-weight:700;color:var(--secondary);pointer-events:none}.checkout__step--past,.checkout__step--past:hover{color:var(--success)}.checkout__step--disabled{color:var(--gray);pointer-events:none}.checkout__step:hover{text-decoration:none}.checkout__step:focus{outline:none}.checkout__step .fa-arrow-left{opacity:.75}.checkout__step .fa-shopping-cart{color:var(--success);opacity:.5}.checkout__info{background:var(--light)}@media (max-width:991.98px){.checkout__info{margin-top:2.5rem}}@media (min-width:992px){.checkout__info{border-left:.3rem solid var(--secondary);border-radius:.25rem 0 0 .25rem}}.checkout__back{margin-top:2rem;text-align:right}@media (max-width:575.98px){.checkout__back>.btn{display:block}}.checkout__col{padding-top:1rem}.checkout__shipping{margin-bottom:1.5rem}.checkout__shipping-method{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;border-radius:.25rem;padding:.75rem 1rem;background:var(--light);border-left:3px solid var(--success)}.checkout__shipping-method small{color:var(--gray)}.checkout .shipping-calculator__services{max-width:100%}.checkout__overlay{background:var(--body-bg);position:absolute;width:100%;height:100%;top:0;left:0;z-index:-1}.checkout__overlay.show{z-index:10;opacity:.5}.checkout__summary{padding:1rem .5rem;display:flex;flex-direction:column;justify-content:space-between;height:100%}.checkout__discount{margin-bottom:1.5rem}.checkout__user{margin-bottom:1rem}.checkout__user small{color:var(--gray)}.checkout__btn-top{margin:var(--spacer-5) auto 0;display:block}.checkout .product-card__buy{opacity:1}',""]),t.exports=e},370:function(t,e,a){"use strict";a.r(e);a(49);var s=a(28),i=a(39),n=a(9),o=a(54),r=a(116),c=a(164),l=a(22),u=a(40),d=a(79),p=a(88),m=a(190),h=a(300),_=a(302),f=a(246),y=a(239),g=a(301),v=(a(233),a(4)),b=a(285);a(12);var C=a(27),k=a(1),w=a(334),j=a(303),x=a(267),O=a(234),S=a.n(O);const P=C.$ecomConfig.get("country_code");var $={name:"CreditCardForm",components:{InputDate:j.a,InputDocNumber:x.a,CleaveInput:S.a},props:{amount:{type:Object,required:!0},checkHolder:String,canSkipHolderInfo:Boolean,isCompany:Boolean,installmentOptions:Array,jsClient:Object,jsClientLoad:Promise},data(){return{formattedCardBin:"",card:{bin:"",name:"",date:"",cvv:"",birth:"",doc:"",installment:this.installmentOptions?1:0},isLoadingInstallments:!1,installmentList:[],alert:{bin:!1,date:!1,cvv:!1},isNumberValidated:!1,isNumberPotentiallyValid:!1,activeBrand:"",brands:["visa","mastercard","american-express","elo","diners-club","hiper","hipercard"],canHideHolderFields:this.canSkipHolderInfo||Boolean(this.checkHolder),loadPromise:this.jsClientLoad||Promise.resolve()}},computed:{i19aboutCvvMsg:()=>Object(i.a)(s.f),i19atSight:()=>Object(i.a)(s.o).toLowerCase(),i19birthdate:()=>Object(i.a)(s.p),i19cardNumber:()=>Object(i.a)(s.A),i19confirmPurchase:()=>Object(i.a)(s.N),i19docNumber:()=>Object(i.a)(s.db),i19holderName:()=>Object(i.a)(s.Cb),i19interestFree:()=>Object(i.a)(s.Fb).toLowerCase(),i19nameOnCard:()=>Object(i.a)(s.ac),i19of:()=>Object(i.a)(s.kc).toLowerCase(),i19parcelIn:()=>Object(i.a)(s.wc),i19securityCode:()=>Object(i.a)(s.dd),i19validThru:()=>Object(i.a)(s.Fd),lang:()=>C.$ecomConfig.get("lang"),holderName:{get(){return this.card.name},set(t){this.card.name=t.toUpperCase()}},compareName(){return this.checkHolder.replace(/(\s.*)/,"")}},methods:{formatMoney:d.a,checkName(){if(!this.canSkipHolderInfo&&this.checkHolder){const t=this.card.name.replace(/(\s.*)/,"");""===t?this.canHideHolderFields=!0:0===t.localeCompare(this.compareName,"en",{sensitivity:"base"})?(this.canHideHolderFields=!0,this.card.doc=this.card.birth=""):this.canHideHolderFields=!1}},validateDate(){const t=this.card.date.substr(0,2),e=this.card.date.substr(2,2);return 2===e.length&&(w.expirationMonth(t).isValid&&w.expirationYear(e).isValid)},validateCvv(){return w.cvv(this.card.cvv,"american-express"!==this.activeBrand?3:4).isValid},updateInstallmentList(){const t=this.jsClient.cc_installments;if(t&&t.function){const e=window[t.function]({number:this.card.bin,amount:this.amount.total});t.is_promise?(this.isLoadingInstallments=!0,e.then((t=>{this.installmentList=t,t.length&&(this.card.installment=1)})).finally((()=>{this.isLoadingInstallments=!1}))):this.installmentList=e}},generateCardHash(){return this.loadPromise.then((()=>{const t=this.jsClient.cc_hash;if(t&&t.function){const{name:e,doc:a,bin:s,cvv:i,date:n}=this.card;return window[t.function]({name:e,doc:a,number:s,cvc:i,month:n.substr(0,2),year:n.substr(2,2),brand:this.activeBrand})}return""}))},emitCardData(t){const{bin:e,name:a,cvv:s,doc:i,birth:n,installment:o,address:r}=this.card,c={credit_card:{holder_name:a,last_digits:e.slice(-4),save:!0,cvv:parseInt(s,10),hash:t}};if(o&&(c.installments_number=o),r&&r.zip&&(c.billing_address=r),a&&i&&(c.payer={fullname:a,doc_number:i.replace(/\D/g,"")},n)){const t=(t,e)=>parseInt(n.substr(t,e),10);let e,a,s;"BR"===P?(e=t(0,2),a=t(2,2),s=t(4,4)):(e=t(6,2),a=t(4,2),s=t(0,4)),c.payer.birth_date={day:e,month:a,year:s}}this.$emit("checkout",c)},notifyInvalidCard(){this.$toast({title:Object(i.a)(s.Gb),body:Object(i.a)(s.Hb)})},submit(){const{alert:t}=this;if(t.bin=!this.isNumberPotentiallyValid,t.date=!this.validateDate(),t.cvv=!this.validateCvv(),t.bin||t.date||t.cvv)this.notifyInvalidCard();else{const t=this.$el;t.checkValidity()&&this.validateDate()&&this.validateCvv()&&(this.jsClient?this.generateCardHash().then(this.emitCardData).catch((t=>{console.error(t),this.notifyInvalidCard()})):this.emitCardData()),t.classList.add("was-validated")}}},watch:{installmentOptions:{handler(t){t&&(this.installmentList=t.concat().sort(((t,e)=>t.number-e.number)))},immediate:!0},formattedCardBin(t){this.card.bin=t.replace(/\D/g,"")},"card.bin"(t){this.isNumberValidated=this.isNumberPotentiallyValid=!1;const e=w.number(t);e.isPotentiallyValid&&e.card?(this.activeBrand!==e.card.type?(this.activeBrand=e.card.type,this.activeBrand&&this.updateInstallmentList()):!this.installmentList.length&&this.card.bin.length>=6&&this.updateInstallmentList(),e.isValid?this.isNumberValidated=this.isNumberPotentiallyValid=!0:this.isNumberPotentiallyValid=e.isPotentiallyValid):this.activeBrand=""},alert:{handler(){this.$el.classList.remove("was-validated")},deep:!0}},created(){this.jsClient&&!this.jsClientLoad&&(this.loadPromise=Object(b.a)(this.jsClient))},mounted(){const t=this.$el.querySelectorAll("input");for(let e=0;e<t.length;e++)if(!t[e].value){t[e].focus();break}Object(k.$)((function(){Object(k.$)('[data-toggle="popover"]').popover()}))}},A=(a(343),a(53)),I={name:"PaymentMethods",components:{CreditCardForm:Object(A.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"credit-card needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group credit-card__bin"},[a("label",{attrs:{for:"credit-card-bin"}},[t._v(" "+t._s(t.i19cardNumber)+" ")]),a("div",{staticClass:"input-group"},[a("cleave-input",{staticClass:"form-control",class:!t.isNumberPotentiallyValid&&t.alert.bin?"is-invalid":null,attrs:{type:"tel",id:"credit-card-bin",raw:!1,options:{creditCard:!0},required:""},on:{blur:function(e){t.alert.bin=t.card.bin&&!t.isNumberPotentiallyValid}},model:{value:t.formattedCardBin,callback:function(e){t.formattedCardBin=e},expression:"formattedCardBin"}}),t.activeBrand&&t.brands.indexOf(t.activeBrand)>-1?a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"pay-icon",class:"pay-icon--"+t.activeBrand})])]):t._e()],1)]),a("div",{staticClass:"form-group credit-card__name"},[a("label",{attrs:{for:"credit-card-name"}},[t._v(" "+t._s(t.i19holderName)+" ")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.name,expression:"card.name"}],staticClass:"form-control",attrs:{type:"text",pattern:"[^\\d\\s]{3,}.*",id:"credit-card-name",placeholder:t.i19nameOnCard,required:""},domProps:{value:t.card.name},on:{change:t.checkName,input:function(e){e.target.composing||t.$set(t.card,"name",e.target.value)}}})])]),a("transition",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp position-absolute"}},[t.canHideHolderFields?t._e():a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-birth"}},[t._v(" "+t._s(t.i19birthdate)+" ")]),a("input-date",{attrs:{id:"credit-card-birth"},model:{value:t.card.birth,callback:function(e){t.$set(t.card,"birth",e)},expression:"card.birth"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-doc"}},[t._v(" "+t._s(t.i19docNumber)+" ")]),a("input-doc-number",{attrs:{id:"credit-card-doc","is-company":t.isCompany},model:{value:t.card.doc,callback:function(e){t.$set(t.card,"doc",e)},expression:"card.doc"}})],1)])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"credit-card-validate"}},[t._v(" "+t._s(t.i19validThru)+" ")]),a("cleave-input",{staticClass:"form-control",class:t.alert.date?"is-invalid":null,attrs:{type:"tel",id:"credit-card-validate",pattern:"[\\d]{2}\\/[\\d]{2}",placeholder:"mm/"+("pt_br"===t.lang?"aa":"yy"),options:{date:!0,datePattern:["m","y"]},required:""},on:{blur:function(){t.alert.date=t.card.date&&!t.validateDate()}},model:{value:t.card.date,callback:function(e){t.$set(t.card,"date",e)},expression:"card.date"}})],1),a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"credit-card-cvv"}},[t._v(" CVV "),t._m(0)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.cvv,expression:"card.cvv"}],staticClass:"form-control",class:t.alert.cvv?"is-invalid":null,attrs:{type:"tel",id:"credit-card-cvv",pattern:"\\d{3,4}",placeholder:"123",required:""},domProps:{value:t.card.cvv},on:{blur:function(){t.alert.cvv=t.card.cvv&&!t.validateCvv()},input:function(e){e.target.composing||t.$set(t.card,"cvv",e.target.value)}}})])]),t.installmentList.length||t.isLoadingInstallments?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-installment"}},[t._v(" "+t._s(t.i19parcelIn)+" ")]),a("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"d-none"}},[t.isLoadingInstallments?a("div",{key:"loading",staticClass:"mx-2 spinner-grow",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.card.installment,expression:"card.installment"}],key:"installments",staticClass:"custom-select",attrs:{id:"credit-card-installment"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.card,"installment",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:1}},[t._v(" "+t._s(t.formatMoney(t.amount.total))+" "+t._s(t.i19atSight)+" ")]),t._l(t.installmentList,(function(e){var s=e.number,i=e.value,n=e.tax;return s>1?a("option",{domProps:{value:s}},[t._v(" "+t._s(s+"x "+t.i19of+" "+t.formatMoney(i))+" "),n?t._e():[t._v(" "+t._s(t.i19interestFree)+" ")]],2):t._e()}))],2)])],1):t._e(),a("button",{staticClass:"btn btn-lg btn-block btn-success",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-lock mr-1"}),t._v(" "+t._s(t.i19confirmPurchase)+" ")])],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-muted",attrs:{title:t.i19securityCode,"data-container":"body","data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":t.i19aboutCvvMsg}},[a("i",{staticClass:"fas fa-question-circle"})])}],!1,null,null,null).exports},props:{amount:{type:Object,required:!0},cartItems:Array,customer:Object,appsSort:{type:Array,default:()=>window.ecomPaymentApps||[]},ecomCart:{type:Object,default:()=>n.a}},data:()=>({isWaiting:!1,fetching:null,processingAppId:void 0,paymentGateways:[],selectedGateway:-1,loadedClients:{}}),computed:{i19anyPaymentMethodMsg:()=>Object(i.a)(s.m),i19changePaymentMethod:()=>Object(i.a)(s.D),i19checkout:()=>Object(i.a)(s.E),i19generateBillet:()=>Object(i.a)(s.wb),i19interestFree:()=>Object(i.a)(s.Fb),i19ofDiscount:()=>Object(i.a)(s.lc),i19onFreight:()=>Object(i.a)(s.nc),i19recurrent:()=>Object(i.a)(s.Jc),i19total:()=>Object(i.a)(s.yd),i19tryAgain:()=>Object(i.a)(s.Ad),i19upTo:()=>Object(i.a)(s.Ed),items(){return this.cartItems||this.ecomCart.data.items},paymentGateway(){return this.paymentGateways[this.selectedGateway]||{}},jsClient(){return this.paymentGateway.js_client},jsClientLoad(){const{amount:t,customer:e,items:a,loadedClients:n,selectedGateway:o}=this;return t.total?n[o].then((n=>{this.$refs.gatewayContainer&&(this.$refs.gatewayContainer.innerHTML=this.jsClient.container_html);const r=n({amount:t,customer:e,items:a}),c=this.jsClient.transaction_promise;if(c&&o===this.selectedGateway)try{window[c].then(this.checkout).catch((t=>{console.error(t),this.$toast({title:Object(i.a)(s.xc),body:Object(i.a)(s.yc),variant:"danger"})}))}catch(t){console.error(t)}return r})):Promise.resolve()},canShowGatewayIcon(){return-1===this.selectedGateway||!this.jsClient||!this.jsClient.container_html},isCompany(){return this.customer&&"p"!==this.customer.registry_type},customerName(){return this.customer&&this.customer.name&&this.customer.name.given_name}},methods:{formatMoney:d.a,gatewayIcon(t){switch(t.payment_method.code){case"credit_card":return"credit-card";case"banking_billet":return"barcode"}return"money-check"},installmentOption(t){let e;return t.installment_options&&t.installment_options.forEach((t=>{(!e||!t.tax&&e.tax||t.tax===e.tax&&t.number>e.number)&&(e=t)})),e},parsePaymentOptions(t=[],e){var a,s;e||(this.paymentGateways=[],this.loadedClients={}),t.length&&(Array.isArray(this.appsSort)&&this.appsSort.length&&(a=t,s=this.appsSort,a.sort(((t,e)=>{if(t.app_id===e.app_id)return 0;const a=s.indexOf(t.app_id),i=s.indexOf(e.app_id);return a>-1?i>-1?a<i?-1:1:a>-1?-1:1:i>-1?1:0}))),t.forEach((t=>{const{validated:a,error:s,response:i}=t;a&&!s&&i.payment_gateways.forEach((a=>{const s={app_id:t.app_id,installment_option:this.installmentOption(a),...a},i=s.js_client;if(i){const t=e?this.selectedGateway:this.paymentGateways.length;this.loadedClients[t]=Object(b.a)(i,!0)}e?(this.paymentGateways[this.selectedGateway]=s,e=!1):this.paymentGateways.push(s)}))})))},fetchPaymentGateways(t=null,e=!1){let a="/list_payments.json";const{items:s}=this,i=this.amount?{...this.amount}:{};"number"!=typeof i.subtotal&&(i.total=i.subtotal=s.reduce(((t,e)=>t+Object(u.a)(e)*e.quantity),0),i.freight&&(i.total+=i.freight),i.discount&&(i.total-=i.discount));const n={items:s,amount:i,domain:window.location.hostname,can_fetch_when_selected:!0};if(!e&&this.customer){n.customer={};for(const t in this.customer){const e=this.customer[t];e&&("object"!=typeof e||Object.keys(e).length)&&(n.customer[t]=e)}}t>0&&(a+="?app_id=".concat(t),this.paymentGateway.payment_method&&(n.payment_method=this.paymentGateway.payment_method)),this.isWaiting&&this.processingAppId===t||(this.isWaiting=!0,this.processingAppId=t,setTimeout((()=>{this.fetching=Object(v.c)({url:a,method:"POST",data:n}).then((({data:e})=>{this.parsePaymentOptions(e.result,Boolean(t&&this.selectedGateway>=0))})).catch((a=>{console.error(a),e||setTimeout((()=>{this.fetchPaymentGateways(t,!0)}),a.response&&400===a.response.status?50:500)})).finally((()=>{this.isWaiting=!1}))}),t?5:50))},handleCheckout(){this.jsClient&&this.jsClient.transaction_promise&&this.jsClientLoad.toString()||this.checkout()},checkout(t){this.$emit("checkout",{...this.paymentGateway,...t})}},watch:{selectedGateway:{handler(){const{paymentGateway:t}=this;this.$emit("select-gateway",t),t.fetch_when_selected&&this.fetchPaymentGateways(t.app_id)},immediate:!0},"amount.total"(t,e){(t&&!e||Math.abs(t-e)>.1)&&-1===this.selectedGateway&&(this.isWaiting?this.fetching.then(this.fetchPaymentGateways):this.fetchPaymentGateways())}},created(){this.fetchPaymentGateways()}},M=(a(345),Object(A.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment"},[a("transition-group",{attrs:{"enter-active-class":"animated fadeIn slow"}},[t.isWaiting?a("div",{key:"waiting",staticClass:"payment__loading"},[a("div",{staticClass:"spinner-grow",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])]):t.paymentGateways.length?a("div",{key:"gateways",staticClass:"list-group"},[t._l(t.paymentGateways,(function(e,s){return a("a",{directives:[{name:"show",rawName:"v-show",value:-1===t.selectedGateway||t.selectedGateway===s,expression:"selectedGateway === -1 || selectedGateway === i"}],key:e.app_id+e.payment_method.code+s,staticClass:"payment__gateway list-group-item list-group-item-action",attrs:{href:"#","data-intermediator":e.intermediator&&e.intermediator.code},on:{click:function(e){e.preventDefault(),t.selectedGateway=t.selectedGateway===s?-1:s}}},[a("span",{staticClass:"payment__head"},[a("span",{staticClass:"payment__title"},[t.selectedGateway===s?a("span",{staticClass:"payment__back",attrs:{"aria-label":t.i19changePaymentMethod}},[a("i",{staticClass:"fas fa-chevron-left"})]):t._e(),t._v(" "+t._s(e.label)+" ")]),a("span",[a("span",{staticClass:"payment__badges"},["recurrence"===e.type?a("span",{staticClass:"badge badge-secondary payment__recurrence"},[t._v(" "+t._s(t.i19recurrent)+" ")]):t._e(),e.discount&&e.discount.value>0?a("span",{staticClass:"badge badge-success payment__discount"},["percentage"===e.discount.type?[t._v(" "+t._s(e.discount.value)+"% ")]:a("span",{staticClass:"payment__discount-value"},[t._v(" "+t._s(t.formatMoney(e.discount.value))+" ")]),t._v(" "+t._s(t.i19ofDiscount)+" "),"freight"===e.discount.apply_at?[t._v(" "+t._s(t.i19onFreight)+" ")]:t._e()],2):e.installment_option?a("span",{staticClass:"badge badge-info payment__installment"},[t._v(" "+t._s(t.i19upTo)+" "+t._s(e.installment_option.number)+"x "),e.installment_option.tax?t._e():[t._v(" "+t._s(t.i19interestFree)+" ")]],2):t._e()]),a("span",{staticClass:"payment__icon"},[a("i",{staticClass:"fas",class:"fa-"+t.gatewayIcon(e)})])])]),t.canShowGatewayIcon?[e.icon?a("img",{staticClass:"payment__stamp",attrs:{src:e.icon}}):e.intermediator&&e.intermediator.name?a("small",{staticClass:"payment__intermediator"},[t._v(" "+t._s(e.intermediator.name)+" ")]):t._e()]:t._e()],2)})),a("transition",{attrs:{"enter-active-class":"animated fadeIn"}},[t.selectedGateway>-1?a("div",{staticClass:"payment__method list-group-item"},[t.paymentGateway.text?a("p",{staticClass:"payment__text",domProps:{innerHTML:t._s(t.paymentGateway.text)}}):t._e(),t.jsClient&&t.jsClient.container_html?a("div",{ref:"gatewayContainer",attrs:{"data-loaded":t.jsClientLoad.toString(),"data-amount":JSON.stringify(t.amount)},domProps:{innerHTML:t._s(t.jsClient.container_html)}}):"credit_card"===t.paymentGateway.payment_method.code?a("credit-card-form",{attrs:{amount:t.amount,"check-holder":t.customerName,"is-company":t.isCompany,"installment-options":t.paymentGateway.installment_options,"js-client":t.jsClient,"js-client-load":t.jsClientLoad},on:{checkout:t.checkout}}):a("div",[a("p",{staticClass:"payment__total"},[t._v(" "+t._s(t.i19total)+": "),a("strong",[t._v(t._s(t.formatMoney(t.amount.total)))])]),a("button",{staticClass:"btn btn-success btn-lg btn-block payment__pay",on:{click:t.handleCheckout}},[a("i",{staticClass:"fas fa-check mr-1"}),t._v(" "+t._s("banking_billet"===t.paymentGateway.payment_method.code?t.i19generateBillet:t.i19checkout)+" ")])]),a("hr"),a("button",{staticClass:"btn btn-sm btn-light",attrs:{type:"button"},on:{click:function(e){t.selectedGateway=-1}}},[a("i",{staticClass:"fa fa-edit mr-1"}),t._v(" "+t._s(t.i19changePaymentMethod)+" ")])],1):t._e()])],2):a("div",{key:"empty",staticClass:"payment__empty"},[a("p",[t._v(t._s(t.i19anyPaymentMethodMsg))]),a("button",{staticClass:"btn btn-primary",on:{click:function(){return t.fetchPaymentGateways()}}},[t._v(" "+t._s(t.i19tryAgain)+" ")])])])],1)}),[],!1,null,null,null).exports),N=a(299),G=a(298),D=a(271);const L={en_us:"Back to cart",pt_br:"Voltar ao carrinho"},T={en_us:"Bag",pt_br:"Sacola"},V={en_us:"Buyer",pt_br:"Comprador"},B={en_us:"Change shipping method",pt_br:"Alterar forma de envio"},E={en_us:"Contact phone",pt_br:"Telefone de contato"},R={en_us:"Continue",pt_br:"Continuar"},F={en_us:"Delivery",pt_br:"Entrega"},H={en_us:"Discount",pt_br:"Desconto"},Z={en_us:"Document number",pt_br:"Número do documento"},z={en_us:"Logout",pt_br:"Sair"},Y={en_us:"My account",pt_br:"Minha conta"},q={en_us:"Payment",pt_br:"Pagamento"},U={en_us:"Proceed to payment",pt_br:"Prosseguir para pagamento"},W={en_us:"Complete your registration to proceed with the purchase",pt_br:"Complete seu cadastro para prosseguir com a compra"},J={en_us:"Summary",pt_br:"Resumo"};var K={name:"EcCheckout",components:{DiscountApplier:h.a,LoginBlock:_.a,ShippingLine:y.a,ShippingCalculator:f.a,RecommendedItems:g.a,PaymentMethods:M,AccountForm:N.a,AccountAddresses:G.a,EcSummary:D.a},props:{mergeDictionary:{type:Object,default:()=>({})},cartUrl:{type:String,default:"/app/#/cart"},amount:{type:Object,default:()=>({})},customer:{type:Object,default:()=>({})},shippingZipCode:{type:String},checkoutStep:{type:Number,default:1},shippingService:{type:Object},paymentGateway:{type:Object},ecomCart:{type:Object,default:()=>n.a},discountCoupon:String,notes:String},data(){return{checkoutAppId:1,toCheckoutStep:this.checkoutStep,customerEmail:this.customer.main_email,isUserIdentified:Boolean(this.customer.main_email),editAccount:!1,editShippingService:!this.shippingService,localZipCode:this.shippingZipCode,hasMoreOffers:!1}},computed:{i19addToCart:()=>Object(i.a)(s.j),i19additionalComments:()=>Object(i.a)(s.k),i19buyAlsoMsg:()=>Object(i.a)(s.u),i19checkout:()=>Object(i.a)(s.E),i19orderNotesInputMsg:()=>Object(i.a)(s.sc),i19selectedOffers:()=>Object(i.a)(s.ld),modulesPayload:()=>m.a,dictionary(){return{Bag:T,BackToCart:L,Buyer:V,ChangeShippingMethod:B,ContactPhone:E,Continue:R,Delivery:F,Discount:H,DocNumber:Z,Logout:z,MyAccount:Y,Payment:q,ProceedToPayment:U,RegisterToBuy:W,Summary:J,...this.mergeDictionary}},cart(){return this.ecomCart.data},hasBuyerInfo(){const{customer:t}=this;return this.customerEmail&&t.name&&t.name.given_name&&t.birth_date&&t.birth_date.day&&t.registry_type&&t.doc_number&&t.phones&&t.phones.length},localCustomer:{get(){return this.customer},set(t){this.$emit("update:customer",t),this.$nextTick((()=>{this.editAccount=!1}))}},localDiscountCoupon:{get(){return this.discountCoupon},set(t){this.$emit("update:discountCoupon",t)}},localNotes:{get(){return this.notes},set(t){this.$emit("update:notes",t)}},shownCheckoutStep(){return!this.hasBuyerInfo||this.editAccount?0:Math.min(this.enabledCheckoutStep,this.toCheckoutStep)},shippingAddress(){const{addresses:t}=this.customer;return t&&t.find((t=>Boolean(t.default&&t.street&&t.city&&t.province_code)))},enabledCheckoutStep(){return this.hasBuyerInfo?this.shippingAddress&&this.shippingService?2:1:0},paymentsListKey(){let t="pay";return this.localDiscountCoupon&&(t+="-".concat(this.localDiscountCoupon)),["freight","subtotal"].forEach((e=>{this.amount[e]>0&&(t+="-".concat(this.amount[e]))})),t}},methods:{name:l.a,price:u.a,formatMoney:d.a,img:t=>Object(p.a)(t,null,"small"),i18n(t){return Object(i.a)(this.dictionary[t])},login(t){t.checkLogin()&&(this.customerEmail=t.getCustomer().main_email,this.$emit("login",t))},autoMoveStep(){"activeElement"in document&&document.activeElement.blur(),this.$nextTick((()=>{document.body.offsetWidth>=768?this.toCheckoutStep=this.enabledCheckoutStep:!this.enabledCheckoutStep||this.toCheckoutStep>1||(this.toCheckoutStep=1)}))},updateZipCode(){this.shippingAddress&&(this.localZipCode=this.shippingAddress.zip)},selectAddress(t){this.$emit("addressSelected",t),this.updateZipCode()},goToTop(){this.$nextTick((()=>{window.scroll({top:this.$el.offsetTop-15,behavior:"smooth"})}))},goToOffers(){window.scroll({top:this.$refs.offers.$el.offsetTop-15,behavior:"smooth"})},selectPaymentGateway(t){this.$emit("update:paymentGateway",t),2===this.checkoutStep&&this.goToTop()}},watch:{customerEmail(t){t&&(this.customer.main_email!==t&&this.$emit("update:customer",{...this.customer,main_email:t}),this.isUserIdentified=!0)},"customer.main_email"(t){t&&(this.customerEmail=t)},localZipCode(){this.editShippingService=!0},toCheckoutStep(t){this.$emit("update:checkoutStep",t),this.goToTop()},enabledCheckoutStep(){this.autoMoveStep()}},created(){this.autoMoveStep(),this.updateZipCode(),this.ecomCart.on("addItem",(()=>{this.checkoutAppId++,this.$nextTick((()=>{this.goToTop()}))}))}},Q=(a(354),{name:"checkout",components:{EcCheckout:Object(A.a)(K,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkout"},[a("transition-group",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"d-none"}},[t.shownCheckoutStep?a("div",{key:"app"+t.checkoutAppId,staticClass:"checkout__app"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8"},[a("nav",{staticClass:"checkout__steps"},[a("a",{staticClass:"checkout__step",attrs:{href:t.cartUrl,title:t.i18n("BackToCart")}},[a("i",{staticClass:"fas fa-arrow-left"}),a("span",{staticClass:"d-none d-md-inline"},[a("i",{staticClass:"fas fa-shopping-cart"})])]),t._l([null,"Delivery","Payment"],(function(e,s){return e?a("a",{staticClass:"checkout__step",class:"checkout__step--"+(t.shownCheckoutStep===s?"current":t.enabledCheckoutStep<s?"disabled":t.shownCheckoutStep>s?"past":"next"),attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.toCheckoutStep=s}}},[a("small",[t._v(t._s(s))]),t._v(" "+t._s(t.i18n(e))+" ")]):t._e()}))],2),a("div",{staticClass:"row"},[a("div",{staticClass:"checkout__col col-md-6",class:1===t.enabledCheckoutStep?"offset-lg-3":null},[a("div",{class:1!==t.shownCheckoutStep?"d-none d-md-block":null},[t.shippingAddress?a("div",{staticClass:"checkout__shipping"},[a("transition-group",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.shippingService&&!t.editShippingService?a("div",{key:"shipping"},[a("div",{staticClass:"checkout__shipping-method"},[a("small",[t._v(t._s(t.shippingService.label))]),a("shipping-line",{attrs:{"shipping-line":t.shippingService.shipping_line}})],1),a("a",{staticClass:"btn btn-sm btn-secondary",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.editShippingService=!0}}},[a("i",{staticClass:"fas fa-edit mr-1"}),t._v(" "+t._s(t.i18n("ChangeShippingMethod"))+" ")])]):a("shipping-calculator",{key:"shipTo"+t.localZipCode,attrs:{"can-select-services":!0,"shipped-items":t.cart.items,"zip-code":t.localZipCode,"can-input-zip":!1},on:{"select-service":function(e){return t.$emit("update:shippingService",e)}}})],1)],1):t._e(),a("account-addresses",{attrs:{customer:t.localCustomer,zipCode:t.shippingZipCode},on:{"update:customer":function(e){t.localCustomer=e},"select-address":t.selectAddress}}),a("transition",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},[1===t.shownCheckoutStep&&t.enabledCheckoutStep>=2&&t.shippingService?a("button",{staticClass:"checkout__btn-proceed btn btn-success mt-4",on:{click:function(e){t.toCheckoutStep=2}}},[a("i",{staticClass:"fas fa-chevron-right mr-1"}),t._v(" "+t._s(t.i18n("ProceedToPayment"))+" ")]):t._e()]),a("div",{staticClass:"checkout__overlay fade",class:1!==t.shownCheckoutStep?"show":null,on:{click:function(e){t.toCheckoutStep=1}}})],1)]),a("div",{staticClass:"checkout__col col-md-6"},[a("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight fast position-absolute"}},[t.enabledCheckoutStep>=2?a("div",{class:2!==t.shownCheckoutStep?"d-none d-md-block":null},[a("payment-methods",{key:t.paymentsListKey,attrs:{amount:t.amount,customer:t.localCustomer},on:{"select-gateway":t.selectPaymentGateway,checkout:function(e){return t.$emit("checkout",e)}}}),a("div",{staticClass:"checkout__overlay fade",class:2!==t.shownCheckoutStep?"show":null,on:{click:function(e){t.toCheckoutStep=2}}})],1):t._e()])],1)])]),a("div",{staticClass:"col-lg-4 checkout__info"},[a("div",{staticClass:"checkout__summary"},[a("ec-summary",{attrs:{amount:t.amount,items:t.cart.items,buyer:t.customer,shippingAddress:t.shippingAddress,"can-show-price-options":!(t.paymentGateway&&t.paymentGateway.app_id)},on:{"click:account":function(e){t.editAccount=!0}},scopedSlots:t._u([{key:"more-offers",fn:function(){return[a("transition",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.hasMoreOffers?a("button",{staticClass:"checkout__btn-offers btn btn-sm btn-link",on:{click:t.goToOffers}},[a("i",{staticClass:"fas fa-plus mr-1"}),t._v(" "+t._s(t.i19selectedOffers)+" ")]):t._e()])]},proxy:!0}],null,!1,2625165530)},[t.enabledCheckoutStep>1?a("discount-applier",{staticClass:"checkout__discount",attrs:{amount:t.amount,"coupon-code":t.localDiscountCoupon,"modules-payload":t.modulesPayload,"is-attention-wanted":""},on:{"update:couponCode":function(e){t.localDiscountCoupon=e},"update:coupon-code":function(e){t.localDiscountCoupon=e},"set-discount-rule":function(e){return t.$emit("setDiscountRule",e)}}}):t._e()],1),a("div",{staticClass:"checkout__notes mt-4 mb-auto"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"order-notes"}},[t._v(t._s(t.i19additionalComments))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localNotes,expression:"localNotes"}],staticClass:"form-control",attrs:{placeholder:t.i19orderNotesInputMsg,id:"order-notes",rows:"3",maxlength:"255"},domProps:{value:t.localNotes},on:{input:function(e){e.target.composing||(t.localNotes=e.target.value)}}})])]),a("div",{staticClass:"checkout__back"},[a("a",{staticClass:"btn btn-sm btn-light",attrs:{href:t.cartUrl}},[a("i",{staticClass:"fas fa-chevron-left mr-1"}),t._v(" "+t._s(t.i18n("BackToCart"))+" ")])])],1)])]),a("recommended-items",{ref:"offers",staticClass:"mt-5 pt-lg-3 mx-xl-3",attrs:{"sort-order":"offers","can-load-more":!1,"row-class-name":"row mt-4","product-card-props":{buyText:t.i19addToCart}},on:{"recommend-items":function(e){t.hasMoreOffers=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[a("h3",[t._v(" "+t._s(t.i19buyAlsoMsg)+" "),a("small",{staticClass:"d-block text-muted"},[t._v(" "+t._s(t.i19selectedOffers)+" ")])])]},proxy:!0}],null,!1,1215317570)}),a("button",{staticClass:"checkout__btn-top btn btn-link",on:{click:t.goToTop}},[a("i",{staticClass:"fas fa-chevron-up mr-1"}),t._v(" "+t._s(t.i19checkout)+" ")])],1):t.isUserIdentified?a("div",{key:"account",staticClass:"checkout__account"},[t._t("account",[a("p",{staticClass:"lead"},[t._v(" "+t._s(t.i18n("RegisterToBuy"))+": ")]),a("account-form",{attrs:{customer:t.localCustomer,"is-short":!0},on:{"update:customer":function(e){t.localCustomer=e}}})])],2):a("div",{key:"login"},[t._t("login",[a("login-block",{attrs:{"customer-email":t.customerEmail},on:{login:t.login,update:function(e){t.isUserIdentified=!0},"update:customerEmail":function(e){t.customerEmail=e},"update:customer-email":function(e){t.customerEmail=e}}})])],2)])],1)}),[],!1,null,null,null).exports},data:()=>({updateInterval:null,ecomPassport:null,checkoutStep:0}),computed:{...Object(r.c)(["amount","shippingService","shippingZipCode","selectedAddress"]),customer:{get(){return this.$store.getters.customer},set(t){if(this.setCustomer(t),t._id){const{ecomPassport:t}=this;t&&t.checkAuthorization()&&this.saveCustomer({ecomPassport:t})}}},discountCoupon:{get(){return this.$store.getters.discountCoupon},set(t){this.setDiscountCoupon(t)}},shippingService:{get(){return this.$store.getters.shippingService},set(t){this.selectShippingService(t)}},paymentGateway:{get(){return this.$store.getters.paymentGateway},set(t){this.selectPaymentGateway(t)}},notes:{get(){return this.$store.getters.notes},set(t){this.setNotes(t)}}},methods:{...Object(r.d)(["triggerLoading","setFluidPage","setDiscountCoupon","setDiscountRule","setNotes","selectShippingService","selectPaymentGateway","setCustomer","selectAddress","addOrder"]),...Object(r.b)(["fetchCartItems","fetchCustomer","saveCustomer","sendCheckout"]),login(t){this.ecomPassport=t,this.triggerLoading(!0),this.fetchCustomer({ecomPassport:t}).finally((()=>this.triggerLoading(!1)))},checkout(t){const{customer:e}=this;this.triggerLoading(!0),this.sendCheckout({customer:e,transaction:t}).then((t=>{this.addOrder(t),this.$router.push({name:"confirmation",params:{id:t._id,number:t.number}})})).catch((()=>{this.$toast({title:Object(i.a)(s.xc),body:Object(i.a)(s.yc),variant:"danger"})})).finally((()=>this.triggerLoading(!1)))}},watch:{checkoutStep(t,e){t&&!e&&this.setFluidPage(!0)}},created(){const t=t=>this.fetchCartItems({removeOnError:!0,items:t}),e=({item:e})=>{t([e])};n.a.on("addItem",e);const a=({data:t})=>{t.items.length||this.$router.push({name:"cart"})};this.updateInterval=setInterval(t,6e5),this.triggerLoading(!0),t().then((()=>{n.a.data.flags||(n.a.data.flags=[]),-1===n.a.data.flags.indexOf("open-checkout")&&n.a.data.flags.push("open-checkout");const t=()=>{o.a.checkAuthorization()?Object(c.c)():o.a.once("login",t)};setTimeout(t,300)})).finally((()=>{this.triggerLoading(!1),a(n.a),n.a.on("change",a)})),this.$once("hook:beforeDestroy",(()=>{n.a.off("addItem",e),n.a.off("change",a)}))},destroyed(){this.selectPaymentGateway(null),this.setFluidPage(!1),clearInterval(this.updateInterval)}}),X=Object(A.a)(Q,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"checkout"}},[a("ec-checkout",{attrs:{amount:t.amount,checkoutStep:t.checkoutStep,customer:t.customer,shippingZipCode:t.shippingZipCode,shippingService:t.shippingService,paymentGateway:t.paymentGateway,discountCoupon:t.discountCoupon,notes:t.notes},on:{"update:checkoutStep":function(e){t.checkoutStep=e},"update:checkout-step":function(e){t.checkoutStep=e},login:t.login,"update:customer":function(e){t.customer=e},addressSelected:t.selectAddress,"update:shippingService":function(e){t.shippingService=e},"update:shipping-service":function(e){t.shippingService=e},"update:paymentGateway":function(e){t.paymentGateway=e},"update:payment-gateway":function(e){t.paymentGateway=e},"update:discountCoupon":function(e){t.discountCoupon=e},"update:discount-coupon":function(e){t.discountCoupon=e},"update:notes":function(e){t.notes=e},setDiscountRule:t.setDiscountRule,checkout:t.checkout}})],1)}),[],!1,null,null,null);e.default=X.exports}}]);
//# sourceMappingURL=chunk.1a94b4ea3855ddaac807.js.map